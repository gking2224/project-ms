if (!project.hasProperty("env")) project.ext.env="embedded"

environments {
    env("all") {
        database {
            port = 3306
            url = {"jdbc:mysql://${project.envProps.database.host}:${project.envProps.database.port}/${project.envProps.database.name}"}
            rootUrl = {"jdbc:mysql://${project.envProps.database.host}:${project.envProps.database.port}/${project.envProps.database.root.name}"}
            driver = "com.mysql.jdbc.Driver"
            root {
                name = "mysql"
                username = "${project.rootDatabaseUsername}"
                password = "${project.rootDatabasePassword}"
            }
            hibernate {
                showSql = "false"
                formatSql = "false"
                generateStatistics = "false"
                hbm2ddlAuto = "validate"
                dialect = "org.hibernate.dialect.MySQLInnoDBDialect"
            }
            connectionPoolSize = 2
        }
        webapp {
            contextPath="/projects"
            httpPort=8000
            ng {
                buildDir = "dist"
                port = 3000
                deleteIndexHtml=false
            }
        }
    }
    env("local") {
        database {
            name = "${project.localDatabaseName}"
            host = "${project.localDatabaseHost}"
            password = "${project.localDatabasePassword}"
            username = "${project.localDatabaseUsername}"
            connectionPoolSize = 2
        }
        webapp {
            contextPath="/projects-local"
            host="localhost"
            httpPort=8000
        }
    }
    env("embedded") {
        database {
            port = 8002
            name = "${project.localDatabaseName}"
            host = "${project.localDatabaseHost}"
            password = "${project.localDatabasePassword}"
            username = "${project.localDatabaseUsername}"
            hibernate {
                showSql = "false"
                formatSql = "false"
                hbm2ddlAuto = "validate"
            }
            connectionPoolSize = 2
        }
        webapp {
            contextPath="/projects-local"
            host="localhost"
            ng {
                buildDir = "dist-local"
            }
            httpPort=8000
        }
    }
    env("dev") {
        database {
            name = "${project.devDatabaseName}"
            host = "${project.devDatabaseHost}"
            password = "${project.devDatabasePassword}"
            username = "${project.devDatabaseUsername}"
        }
        webapp {
            contextPath="/projects-dev"
            ng {
                buildDir = "dist-dev"
            }
            httpPort=8020
        }
    }
    env("test") {
        database {
            name = "${project.testDatabaseName}"
            host = "${project.testDatabaseHost}"
            password = "${project.testDatabasePassword}"
            username = "${project.testDatabaseUsername}"
        }
        webapp {
            contextPath="/projects-test"
            host="localhost"
            ng {
                buildDir = "dist-test"
            }
            httpPort=8040
        }
    }
    env("prod") {
        database {
            name = "${project.prodDatabaseName}"
            host = "${project.prodDatabaseHost}"
            password = "${project.prodDatabasePassword}"
            username = "${project.prodDatabaseUsername}"
            hibernate {
                showSql = "false"
                formatSql = "false"
            }
            connectionPoolSize = 10
        }
        webapp {
            contextPath="/projects-prod"
            host="${project.prodWebserverHost}"
            ng {
                buildDir = "dist-prod"
                port = 3000
                deleteIndexHtml=true
            }
            httpPort=8060
        }
    }
}
